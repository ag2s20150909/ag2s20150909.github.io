var TTS_Audio=document.createElement("audio");var TTS_index=0;var TTS_list=[];var TTS_api="https://tts.baidu.com/text2audio?idx=1&cuid=baidu_speech_demo&cod=2&lan=zh&ctp=1&pdt=1 &spd=6&per=2&vol=1&pit=5&tex=";function TTS_Mpaly(g){try{var f;console.log(TTS_index+" txt is:"+g);if(g!=undefined&&g.length>1){f=encodeURI(g)}else{f=encodeURI(" ")}var e=TTS_api+f;TTS_Audio.setAttribute("src",e);TTS_Audio.play()}catch(h){alert("Mplay "+h.toString());console.log(h.toString())}}function TTS_MFplay(g){try{var h=document;var f=h.getElementById("tts");if(f!=undefined){f.parentNode.removeChild(f)}TTS_Audio.setAttribute("id","tts");h.body.appendChild(TTS_Audio);TTS_Mpaly(g)}catch(d){alert("MFplay "+d.toString());console.log(d.toString())}}function TTS_run(g){try{g=g.replace(/\s+/g,"");g=g.replace(/<\/?.+?>/g,"");g=g.replace(/[\r\n]/g,"");g=g.replace(/[&\|\\\*^%$#@\-]/g,"");TTS_index=0;n=200;for(var e=0,f=g.length;e<f/n;e++){TTS_list[e]=g.substring(n*e,n*(e+1));console.log("list["+e+"] is"+TTS_list[e])}TTS_MFplay(TTS_list[0]);TTS_Audio.addEventListener("ended",function(){if(TTS_index<TTS_list.length){TTS_index++;TTS_Mpaly(TTS_list[TTS_index])}},false)}catch(h){alert("run "+h.toString());console.log(h.toString())}};